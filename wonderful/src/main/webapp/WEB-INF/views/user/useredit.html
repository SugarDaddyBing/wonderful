<!DOCTYPE html>
<html>

<head>
<meta charset="UTF-8">
#parse("globalCss.html")
</head>

<body>
  <form class="layui-form">
    <div id="vuearea">
      <label>{{info.email}}</label>
      <div class="layui-form-item">
        <select name="rolename" v-model="info.roleid" lay-filter="rolename">
          <option v-for="role in rolelist" :value="role.roleid">{{role.rolename}}</option>
        </select>
        <button class="layui-btn layui-btn-normal">更新</button>
      </div>
      <div class="layui-form-item">
        <label></label>
      </div>
    </div>
  </form>
  #parse("globalJs.html")
  <script>
			layui.use([ 'form' ], function() {
				var form = layui.form();
				window.form = layui.form();

				form.on('select(rolename)', function(data) {
					vm.info.roleid = data.value;
					vm.info.rolename = data.elem[data.elem.selectedIndex].innerText;
				});
			});

			var vm = new Vue({
				el : '#vuearea',
				data : {
					info : {
						email : '',
						rolename : '',
						roleid : '',
						status : ''
					},
					rolelist : {}
				},
				methods : {
					getRolelist : function() {
						$.get("/user/manage/roleSelect.do", function(r) {
							vm.rolelist = r.rolelist;
						}, "json");
					}
				},
				created : function() {
					this.info = parent.vm.info;
					this.getRolelist();
				},
				updated : function() {
					try {
						window.form.render();
					} catch (error) {

					}
				}

			});
		</script>
</body>

</html>